<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wzmtr.eam.mapper.user.UserHelperMapper">


    <select id="getUserByGroup" resultType="com.wzmtr.eam.dto.res.PersonResDTO">
        SELECT t.LOGIN_NAME as "userId",
               t.LOGIN_NAME as "loginName",
               t.USER_NAME  as "userName",
               t.MOBILE     as "mobile",
               t.EMAIL      as "email"
        FROM (SELECT DISTINCT MEMBER_ID, MEMBER_TYPE
              FROM (SELECT MEMBER_ID, PARENT_ID, MEMBER_TYPE
                    FROM iplat60.XS_USER_GROUP_MEMBER START WITH PARENT_ID in (SELECT parent_id
		FROM iplat60.XS_USER_GROUP_MEMBER t1,
		iplat60.XS_USER_GROUP t2
		WHERE t2.ID = t1.PARENT_ID
		AND t2.GROUP_ENAME = #{groupName})
                        CONNECT BY PRIOR MEMBER_ID = PARENT_ID
                        AND LEVEL <![CDATA[<=]]> 6)
              where MEMBER_TYPE = 'USER') TEMP,
             iplat60.XS_USER t
        where t.USER_ID = TEMP.MEMBER_ID
    </select>
    <select id="getUserByGroupNameAndOrg" resultType="com.wzmtr.eam.dto.res.PersonResDTO">

    </select>
</mapper>